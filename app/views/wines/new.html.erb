<h2>Create new wine</h2>
<%= form_for(@wine) do |f| %>
  <%= render "shared/error_messages", :target => @wine %>
  <div class="field">
    <label for="winery_name">Winery Name</label> <br />
    * <input id="winery_name" type="text" name="winery_name" class="ui-autocomplete-input" value="<%= @winery_name %>" size="30" />
  </div>
  <div class="field">
    <%= f.label :other, 'Other Notes' %><br />
    <%= f.text_field :other %>
  </div>
  <div class="field">
    <%= f.label :year %><br />
    * <%= f.text_field :year %>
  </div>
  <div class="field">
    <%= f.label 'Grapes' %><br />
    * <%= select("grape", "0", Grape.all.collect { |g| [g.name, g.id] }, {:prompt => 'Choose grapes'} ) %>
    <input id="grape_ids" type="hidden" name="grape_ids" value="<%= @grape_ids %> " />
  </div>
  <div class="field">
    <ul id="grape_list">
    </ul>
  </div>
  <div class="field">
    <%= f.label :lcbo_code, 'LCBO Code' %><br />
    <%= f.text_field :lcbo_code %>
  </div>
  <div class="field">
    <%= f.label :country %><br />
    * <%= select("wine", "country", Country::COUNTRY_LIST, {:prompt => 'Choose country'} ) %>
  </div>
  <div class="field">
    <%= f.label :region %><br />
    <%= select("wine", "region", @regions) %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>

<script type="text/javascript">
  wines.enableGrapePicker();
  wines.enableRegionPicker();
  $(document).ready(function() {
  	$('#winery_name').autocomplete({source: '/wineries/search'});
  });
</script>
